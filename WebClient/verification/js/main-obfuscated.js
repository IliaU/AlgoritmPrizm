const a0_0x3371f0=a0_0x4011;(function(_0x7deafd,_0x4ab720){const _0x518f6f=a0_0x4011,_0x5012b6=_0x7deafd();while(!![]){try{const _0x5983db=parseInt(_0x518f6f(0x69))/0x1*(-parseInt(_0x518f6f(0xb3))/0x2)+parseInt(_0x518f6f(0x94))/0x3+parseInt(_0x518f6f(0xb9))/0x4*(-parseInt(_0x518f6f(0x8a))/0x5)+parseInt(_0x518f6f(0x93))/0x6*(-parseInt(_0x518f6f(0xa1))/0x7)+-parseInt(_0x518f6f(0x79))/0x8+parseInt(_0x518f6f(0x85))/0x9+parseInt(_0x518f6f(0x84))/0xa*(parseInt(_0x518f6f(0xbb))/0xb);if(_0x5983db===_0x4ab720)break;else _0x5012b6['push'](_0x5012b6['shift']());}catch(_0x45accc){_0x5012b6['push'](_0x5012b6['shift']());}}}(a0_0x5cf3,0xd3537));const verificationTypeParams={'voucher':{'documentName':a0_0x3371f0(0x91),'documentNumber':a0_0x3371f0(0xb4),'documentItemName':'recvitem','itemQty':a0_0x3371f0(0xb2)},'po':{'documentName':a0_0x3371f0(0x6a),'documentNumber':a0_0x3371f0(0xb7),'documentItemName':a0_0x3371f0(0x75),'itemQty':'ordqty'},'so':{'documentName':a0_0x3371f0(0x6c),'documentNumber':'adjno','documentItemName':a0_0x3371f0(0xba),'itemQty':'adjsid'}},session=JSON[a0_0x3371f0(0xa2)](sessionStorage['getItem'](a0_0x3371f0(0x82))),verificationField=a0_0x3371f0(0xb0),urlParams=new URLSearchParams(window[a0_0x3371f0(0x7e)][a0_0x3371f0(0x71)]),verificationType=urlParams[a0_0x3371f0(0x78)](a0_0x3371f0(0xb6)),SID=urlParams[a0_0x3371f0(0x78)]('sid');var documentItems=[];async function loadDocumentContent(){const _0x109b82=a0_0x3371f0,_0x54a3bd=function(){let _0x2e3e0d=!![];return function(_0x16dcf2,_0x198a09){const _0x2b4344=_0x2e3e0d?function(){if(_0x198a09){const _0x50af82=_0x198a09['apply'](_0x16dcf2,arguments);return _0x198a09=null,_0x50af82;}}:function(){};return _0x2e3e0d=![],_0x2b4344;};}(),_0xd2d8a9=_0x54a3bd(this,function(){const _0x126042=a0_0x4011;return _0xd2d8a9[_0x126042(0x83)]()[_0x126042(0x71)](_0x126042(0x99))[_0x126042(0x83)]()[_0x126042(0x90)](_0xd2d8a9)[_0x126042(0x71)]('(((.+)+)+)+$');});_0xd2d8a9();!(verificationType&&SID)&&(alert(_0x109b82(0x7a)),window[_0x109b82(0x66)]());const _0x34ae34=await getItemsFromAPI(SID,verificationType);initItemsTable();for(let _0xbcb2e3=0x0;_0xbcb2e3<_0x34ae34[_0x109b82(0x8e)];_0xbcb2e3++){_0x34ae34[_0xbcb2e3][_0x109b82(0x70)]=_0x34ae34[_0xbcb2e3][verificationTypeParams[verificationType]['itemQty']],addItem(_0x34ae34[_0xbcb2e3]);}documentItems=_0x34ae34;}function a0_0x4011(_0x47bce2,_0x521199){const _0x10837e=a0_0x5cf3();return a0_0x4011=function(_0x3f077c,_0x515509){_0x3f077c=_0x3f077c-0x65;let _0x5cf36a=_0x10837e[_0x3f077c];return _0x5cf36a;},a0_0x4011(_0x47bce2,_0x521199);}async function loadFile(_0x5395de){const _0x5289a7=a0_0x3371f0;let _0xb1c8a2=$(_0x5289a7(0x8b)),_0x413a99=$(_0x5289a7(0xa4)),_0x388c3d=$(_0x5289a7(0x9c));_0xb1c8a2[_0x5289a7(0xa8)](_0x5289a7(0x65)),_0x413a99['bootstrapTable'](_0x5289a7(0x65)),_0x388c3d[0x0][_0x5289a7(0x96)]['display']=_0x5289a7(0xb5),await loadDocumentContent();let _0x4d372a=_0x5395de[_0x5289a7(0x98)][0x0],_0x438fc6=new FileReader();_0x438fc6[_0x5289a7(0xb1)](_0x4d372a),_0x438fc6[_0x5289a7(0xa6)]=async function(){const _0x5d5883=_0x5289a7;let _0x3de22b=_0x438fc6[_0x5d5883(0xa5)],_0xf90602=_0x3de22b[_0x5d5883(0x77)]('\x0d\x0a'),_0x2fbfca=documentItems,_0x27b80e=[];for(const _0x2adf8d of _0xf90602){let [_0x27cd54,_0x42ab8f]=_0x2adf8d['split']('~');if(_0x27cd54&&_0x42ab8f){if(_0x27cd54[_0x5d5883(0x8e)]===0xd){_0x27cd54=parseInt(_0x27cd54)['toString']();let _0x51d921=verifyItem(_0x27cd54,_0x42ab8f);if(_0x51d921)_0x2fbfca=_0x2fbfca[_0x5d5883(0xb8)](_0x5326d7=>_0x5326d7['itempos']!==_0x51d921[_0x5d5883(0x6d)]);else{let _0x4e1c1b=await getItemInfo(_0x27cd54);if(_0x4e1c1b)addItem(_0x4e1c1b);else{let _0x49139d={'upc':_0x27cd54,'description':_0x5d5883(0xaa)};_0x27b80e[_0x5d5883(0x6b)](_0x49139d);}}}else{let _0x5cd2e0={'upc':_0x27cd54,'description':'Не\x20соответствует\x20формату'};_0x27b80e[_0x5d5883(0x6b)](_0x5cd2e0);}}}for(let _0x53e044=0x0;_0x53e044<_0x2fbfca[_0x5d5883(0x8e)];_0x53e044++){_0xb1c8a2[_0x5d5883(0xa8)](_0x5d5883(0x9b),{'id':_0x2fbfca[_0x53e044]['itempos'],'row':{'read':0x0,'difference':0x0-_0x2fbfca[_0x53e044][_0x5d5883(0x70)]}});}if(_0x27b80e){initErrorTable();for(let _0x1bd53d=0x0;_0x1bd53d<_0x27b80e['length'];_0x1bd53d++){_0x413a99[_0x5d5883(0xa8)](_0x5d5883(0x7d),_0x27b80e[_0x1bd53d]);}}};}function verifyItem(_0x4b93f8,_0x3b6cb2){const _0x42b5bc=a0_0x3371f0;let _0x59b0f1=documentItems[_0x42b5bc(0x8d)](_0x382ffb=>_0x382ffb[_0x42b5bc(0x87)]===_0x4b93f8);if(!_0x59b0f1)return null;let _0x148042=_0x3b6cb2-_0x59b0f1[_0x42b5bc(0x70)];return $('#table')[_0x42b5bc(0xa8)](_0x42b5bc(0x9b),{'id':_0x59b0f1[_0x42b5bc(0x6d)],'row':{'read':_0x3b6cb2,'difference':_0x148042}}),_0x59b0f1;}async function getItemInfo(_0x13bed1){const _0x2b2f07=a0_0x3371f0,_0xbc0de3=[_0x2b2f07(0x88),_0x2b2f07(0x9e)];let _0x2e434b=HOSTNAME+_0x2b2f07(0x72)+_0xbc0de3[_0x2b2f07(0x7c)]()+_0x2b2f07(0xbc)+_0x13bed1,_0x225e76=await fetch(_0x2e434b,{'method':'GET','headers':{'Auth-Session':session[_0x2b2f07(0xaf)]}}),_0x5ee253=await _0x225e76[_0x2b2f07(0xa3)]();return _0x5ee253?_0x5ee253[0x0]:null;}function initItemsTable(){const _0x1ac8e4=a0_0x3371f0;$(_0x1ac8e4(0x8b))['bootstrapTable']({'columns':[{'field':_0x1ac8e4(0x80),'title':'№'},{'field':_0x1ac8e4(0x87),'title':_0x1ac8e4(0xad)},{'field':_0x1ac8e4(0x88),'title':_0x1ac8e4(0x92)},{'field':_0x1ac8e4(0x9e),'title':_0x1ac8e4(0x6f)},{'field':_0x1ac8e4(0x70),'title':_0x1ac8e4(0xbe)},{'field':'read','title':_0x1ac8e4(0x74)},{'field':_0x1ac8e4(0xa0),'title':_0x1ac8e4(0x81)}],'uniqueId':'position','sortName':'position','sortOrder':_0x1ac8e4(0x8c),'showExport':!![]});}function a0_0x5cf3(){const _0x4d1975=['none','type','pono','filter','28TNfmRn','adjitem','30867749PhUvWM','&filter=upc,eq,','GET','Кол-во','removeAll','close','?cols=itempos,upc,description1,description2,','documentName','6784xkxKCe','purchaseorder','push','adjustment','itempos','log','Описание\x202','quantity','search','/v1/rest/inventory?cols=upc,','{\x22data\x22:[{\x22rowversion\x22:','Считано','poitem','display','split','get','8505000oFwFRb','Недостаточно\x20данных\x20для\x20верификации','documentItemName','join','append','location','employeesid','position','Расхождение','session','toString','10WvYfsD','5979213RPLekR','Описание\x20ошибки','upc','description1','data','252305UeYHSy','#table','asc','find','length','\x22:\x22','constructor','receiving','Описание\x201','1212lAHktk','1276287DKvwVX','application/json,\x20version=2','style','gzip,\x20deflate,\x20br','files','(((.+)+)+)+$','Верифицировано\x20','updateByUniqueId','#errors','read','description2','rowversion','difference','48643eIcwXu','parse','json','#error-table','result','onload','/api/backoffice/','bootstrapTable','tableExport','Этого\x20UPC\x20нет\x20в\x20документе','?filter=rowversion,eq,','documentNumber','UPC','toJSON','token','note','readAsText','qty','62dtqNFl','vouno'];a0_0x5cf3=function(){return _0x4d1975;};return a0_0x5cf3();}function initErrorTable(){const _0x390ac0=a0_0x3371f0;$(_0x390ac0(0x9c))[0x0]['style'][_0x390ac0(0x76)]='block',$(_0x390ac0(0xa4))[_0x390ac0(0xa8)]({'columns':[{'field':_0x390ac0(0x87),'title':'UPC'},{'field':'description','title':_0x390ac0(0x86)}]});}function addItem(_0x13cfb1){const _0x36aafe=a0_0x3371f0;$(_0x36aafe(0x8b))[_0x36aafe(0xa8)](_0x36aafe(0x7d),{'position':_0x13cfb1[_0x36aafe(0x6d)],'upc':_0x13cfb1['upc'],'description1':_0x13cfb1[_0x36aafe(0x88)],'description2':_0x13cfb1['description2'],'quantity':_0x13cfb1[_0x36aafe(0x70)],'read':_0x13cfb1[_0x36aafe(0x9d)]??0x0,'difference':0x0});}async function getItemsFromAPI(_0x38da2a,_0x9b8b24){const _0x360640=a0_0x3371f0;let _0x13f934=HOSTNAME+_0x360640(0xa7)+verificationTypeParams[_0x9b8b24][_0x360640(0x68)]+'/'+_0x38da2a+'/'+verificationTypeParams[_0x9b8b24][_0x360640(0x7b)]+_0x360640(0x67)+verificationTypeParams[_0x9b8b24]['itemQty'],_0x3e6e4b=await fetch(_0x13f934,{'method':'GET','headers':{'Content-Type':_0x360640(0x95),'Accept':_0x360640(0x95),'Accept-Encoding':_0x360640(0x97),'Auth-Session':session['token']}});_0x3e6e4b=await _0x3e6e4b[_0x360640(0xa3)]();if(_0x3e6e4b[_0x360640(0x89)][_0x360640(0x8e)])return _0x3e6e4b[_0x360640(0x89)];}async function updateField(_0x3f9387,_0x5149af,_0xba5ca4){const _0x35f4a8=a0_0x3371f0;let _0x533a4d=HOSTNAME+_0x35f4a8(0xa7)+verificationTypeParams[_0xba5ca4][_0x35f4a8(0x68)]+'/'+SID+'?cols=rowversion,'+verificationTypeParams[_0xba5ca4]['documentNumber'],_0x4a7fed=await fetch(_0x533a4d,{'method':_0x35f4a8(0xbd),'headers':{'Content-Type':_0x35f4a8(0x95),'Accept':_0x35f4a8(0x95),'Accept-Encoding':_0x35f4a8(0x97),'Auth-Session':session[_0x35f4a8(0xaf)]}});_0x4a7fed=await _0x4a7fed[_0x35f4a8(0xa3)]();if(!_0x4a7fed['data'][_0x35f4a8(0x8e)])return null;console[_0x35f4a8(0x6e)](_0x4a7fed[_0x35f4a8(0x89)]);let _0x41d0ed=_0x4a7fed[_0x35f4a8(0x89)][0x0][verificationTypeParams[_0xba5ca4][_0x35f4a8(0xac)]],_0x28355f=_0x4a7fed[_0x35f4a8(0x89)][0x0][_0x35f4a8(0x9f)];_0x533a4d=HOSTNAME+_0x35f4a8(0xa7)+verificationTypeParams[_0xba5ca4]['documentName']+'/'+SID+_0x35f4a8(0xab)+_0x28355f,_0x4a7fed=await fetch(_0x533a4d,{'method':'PUT','headers':{'Content-Type':_0x35f4a8(0x95),'Accept':_0x35f4a8(0x95),'Accept-Encoding':_0x35f4a8(0x97),'Auth-Session':session[_0x35f4a8(0xaf)]},'body':_0x35f4a8(0x73)+_0x28355f+',\x22'+_0x3f9387+_0x35f4a8(0x8f)+_0x5149af+'\x22}]}'}),_0x4a7fed=await _0x4a7fed[_0x35f4a8(0xa3)]();if(!_0x4a7fed['data'][_0x35f4a8(0x8e)])return null;return _0x41d0ed;}async function verifyDocument(){const _0x4635aa=a0_0x3371f0,_0x2a0d0c=new Date(),_0x1e1bda=session[_0x4635aa(0x7f)]??null;if(!_0x1e1bda)return null;let _0xc50529=_0x4635aa(0x9a)+_0x1e1bda+':'+_0x2a0d0c['toJSON'](),_0x5905f5=await updateField(verificationField,_0xc50529,verificationType);return $(_0x4635aa(0x8b))[_0x4635aa(0xa9)]({'type':'excel','fileName':''+verificationType+_0x5905f5+'-'+_0x2a0d0c[_0x4635aa(0xae)]()[_0x4635aa(0x77)]('T')[0x0]}),_0x5905f5;}loadDocumentContent();